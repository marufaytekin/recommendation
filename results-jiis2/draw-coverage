# =======================================================
# 10-fold CV Tests
# =======================================================

 function write (f, file_name)
   H = 3.2; W = 4;
   h = f;
   set (h,'papertype', '<custom>')
   set (h,'paperunits','inches');
   set (h,'papersize',[H W])
   set (h,'paperposition', [0,0,[W H]])
   set (h,'defaultaxesposition', [0.15, 0.15, 0.75, 0.75])
   set (0,'defaultaxesfontsize', 10)
   out_file_name = strcat (file_name,'.eps');
   print('-depsc', out_file_name);
 endfunction


#ymusic_ub_lsh_hash_tables_prediction_coverage  = [0.9545437972837482, 0.9952055418831464, 0.9991158508795918, 0.9997812414547443, 0.9999635402424575, 0.9999908850606144, 1.0, 1.0, 1.0, 1.0];
#ymusic_ub_cover_hash_functions = [1.0, 1.0, 1.0, 1.0, 1.0, 0.9999726551818431, 0.9990247014857351, 0.9914228420381005, 0.9547169811320755, 0.8917145200984414];
#ymusic_ib_lsh_hash_tables_prediction_coverage  = [0.4092243186582809, 0.5980767477896273, 0.7407802388114119, 0.8198341081031811, 0.8693282289672773, 0.9021602406343998, 0.9225412451007201, 0.9490930635311275, 0.9592471060067451, 0.968890711876766];
#ymusic_ib_lsh_hash_functions_prediction_coverage  = [1.0, 1.0, 0.9997174368790448, 0.9940479445811685, 0.960823990520463, 0.8760277094157324, 0.714738856986601, 0.5072646066903655, 0.3510801203171999, 0.21014492753623185];

#ml_1m_ub_lsh_hash_tables_prediction_coverage  = [0.9569506760532956, 0.9897909546758092, 0.9959337197293028, 0.997550234910409, 0.9981501756830166, 0.9988834379900197, 0.9991467459591723, 0.9992767331604462, 0.9994367183285124, 0.9994933806954961];
#ml_1m_ub_cover_hash_functions  = [0.9999966670332929, 0.999980001999798, 0.9998733453988308, 0.9997000280639976, 0.9992767344602153, 0.9985334697204246, 0.9954104336582951, 0.9918974136631328, 0.9793285921506757, 0.9489813688255948];
#ml_1m_ib_lsh_hash_tables_prediction_coverage  = [0.9137380588006104, 0.9761189040197337, 0.9922107379955843, 0.9969502848063122, 0.9979535197160629, 0.9991367480588634, 0.999556709062539, 0.9997366913643079, 0.9998066846316312, 0.9998933434656861];
#ml_1m_ib_lsh_hash_functions_prediction_coverage  = [1.0, 1.0, 0.9999966669666396, 0.9999833347332153, 0.9996533666634063, 0.9980135216818294, 0.9921973829331137, 0.9785453494404992, 0.9537643679801632, 0.887647343199697];

#amazon_ub_lsh_hash_tables_prediction_coverage  = [0.5886615889096092, 0.7548672183996287, 0.8332412136663937, 0.8830593534296582, 0.9144814312580319, 0.9346090412955084, 0.9493566133185554, 0.9604029005492937, 0.9688308324785551, 0.9746449216813041];
#amazon_ub_cover_hash_functions  = [1.0, 1.0, 0.9998139888453216, 0.9961843339060819, 0.973252183034582, 0.9124543208393626, 0.8090498568904151, 0.6657335801433109, 0.49672349943772814, 0.3431426870084226];
#amazon_ib_lsh_hash_tables_prediction_coverage  = [0.6245908022592087, 0.7735738525850829, 0.8515085801627443, 0.8969722500244757, 0.925413296713578, 0.945068769982722, 0.9584378918324377, 0.9689499891159207, 0.9753078636445708, 0.98039699162894];
#amazon_ib_lsh_hash_functions_prediction_coverage  = [0.9999904605866821, 0.9999189150208738, 0.9993227200132407, 0.9961604883416459, 0.9791473827421103, 0.9262051276019223, 0.8278086137731759, 0.6946085607710941, 0.5556228387441361, 0.41582156188617686];

amazon_ub_lsh_hash_tables_prediction_coverage  = [0.5886615889096092, 0.7548672183996287, 0.8332412136663937, 0.8830593534296582, 0.9144814312580319, 0.9346090412955084, 0.9493566133185554, 0.9604029005492937, 0.9688308324785551, 0.9746449216813041];
amazon_ub_lsh_hash_functions_prediction_coverage =[1.0, 1.0, 0.9998139888453216, 0.9961843339060819, 0.973252183034582, 0.9124543208393626, 0.8090498568904151, 0.6657335801433109, 0.49672349943772814, 0.3431426870084226];
amazon_ib_lsh_hash_tables_prediction_coverage  = [0.6245908022592087, 0.7735738525850829, 0.8515085801627443, 0.8969722500244757, 0.925413296713578, 0.945068769982722, 0.9584378918324377, 0.9689499891159207, 0.9753078636445708, 0.98039699162894];
amazon_ib_lsh_hash_functions_prediction_coverage =[0.9999904605866821, 0.9999189150208738, 0.9993227200132407, 0.9961604883416459, 0.9791473827421103, 0.9262051276019223, 0.8278086137731759, 0.6946085607710941, 0.5556228387441361, 0.41582156188617686];
amazon_ib_lsh1_hash_tables_prediction_coverage  = [0.621591122473975, 0.7756100083591212, 0.8513562809043195, 0.8962903615044251, 0.9251510039682799, 0.9452213792339714, 0.9593536315591308, 0.9681296401101164, 0.9749835657695995, 0.9810600032754649];
amazon_ib_lsh1_hash_functions_prediction_coverage =[0.9999809212416046, 0.9998950687057041, 0.9993417946084359, 0.9958933747359783, 0.9784892142740391, 0.9252558803920846, 0.8266018709898025, 0.6980662974930953, 0.5526656718685264, 0.41470576045027707];
amazon_ib_lsh2_hash_tables_prediction_coverage  = [0.5259941165669635, 0.6809484182567935, 0.7714131743419418, 0.8230484891121699, 0.8660985635293397, 0.8906240808249212, 0.911748360640836, 0.9293148408016001, 0.9419352129933017, 0.9508733216156143];
amazon_ib_lsh2_hash_functions_prediction_coverage =[0.9999284580514677, 0.9996184302920396, 0.9978346077755873, 0.9880045050061472, 0.9482787029525229, 0.8617728796983158, 0.7424044704171724, 0.5988498162421988, 0.46173836033280075, 0.32915865659842725];
amazon_ub_lsh1_hash_tables_prediction_coverage  = [0.5855663377442372, 0.7560023916590519, 0.8363606665905081, 0.8826253489219981, 0.9136037752015831, 0.9343085817516515, 0.9504297774911451, 0.9598448798476453, 0.9695414711667693, 0.975012167971181];
amazon_ub_lsh1_hash_functions_prediction_coverage =[1.0, 1.0, 0.9998664524449895, 0.9960794035674172, 0.9737863811713171, 0.9138566440122876, 0.8085443455164513, 0.6681231910729548, 0.5032097984540315, 0.3431904558800551];
amazon_ub_lsh2_hash_tables_prediction_coverage  = [0.47290373956902837, 0.6518871643332417, 0.7462107151046485, 0.8055919915180351, 0.847249520844667, 0.8770592534109726, 0.8989133879247323, 0.9158454003561015, 0.9300779329892673, 0.941214828093757];
amazon_ub_lsh2_hash_functions_prediction_coverage =[1.0, 0.99997138251078, 0.998554817408555, 0.9841221057432059, 0.9373992539327647, 0.8483082283065041, 0.712141375378577, 0.5609553693594159, 0.38983228330712344, 0.24911567643019192];

ml_1m_ub_lsh_hash_tables_prediction_coverage  = [0.9569506760532956, 0.9897909546758092, 0.9959337197293028, 0.997550234910409, 0.9981501756830166, 0.9988834379900197, 0.9991467459591723, 0.9992767331604462, 0.9994367183285124, 0.9994933806954961];
ml_1m_ub_lsh_hash_functions_prediction_coverage =[0.9999966670332929, 0.999980001999798, 0.9998733453988308, 0.9997000280639976, 0.9992767344602153, 0.9985334697204246, 0.9954104336582951, 0.9918974136631328, 0.9793285921506757, 0.9489813688255948];
ml_1m_ib_lsh_hash_tables_prediction_coverage  = [0.9137380588006104, 0.9761189040197337, 0.9922107379955843, 0.9969502848063122, 0.9979535197160629, 0.9991367480588634, 0.999556709062539, 0.9997366913643079, 0.9998066846316312, 0.9998933434656861];
ml_1m_ib_lsh_hash_functions_prediction_coverage =[1.0, 1.0, 0.9999966669666396, 0.9999833347332153, 0.9996533666634063, 0.9980135216818294, 0.9921973829331137, 0.9785453494404992, 0.9537643679801632, 0.887647343199697];
ml_1m_ib_lsh1_hash_tables_prediction_coverage  = [0.9059388122375526, 0.9765546890621875, 0.9921948943544625, 0.9964473771912283, 0.9980937145904152, 0.998996867293208, 0.9994234486436047, 0.9996267413184029, 0.9996933946544025, 0.9997300539892021];
ml_1m_ib_lsh1_hash_functions_prediction_coverage =[0.9998933546624009, 0.9998933546624009, 0.999890021995601, 0.999870025994801, 0.9996200759848031, 0.9980370592548157, 0.9922748783576617, 0.9804472438845564, 0.9454742384856362, 0.8888388988868892];
ml_1m_ib_lsh2_hash_tables_prediction_coverage  = [0.8574085182963408, 0.957855095647537, 0.9823968539625408, 0.9906252082916751, 0.994387789108845, 0.9968173032060254, 0.997863760581217, 0.9988269012864093, 0.9989735386256081, 0.9991801639672065];
ml_1m_ib_lsh2_hash_functions_prediction_coverage =[0.9998933546624009, 0.9998933546624009, 0.9998866893288009, 0.9997867093248017, 0.9989702059588081, 0.9944077851096447, 0.983859894687729, 0.9561887622475505, 0.9080583883223355, 0.8469639405452242];
ml_1m_ub_lsh1_hash_tables_prediction_coverage  = [0.9593971312715374, 0.9898042908418562, 0.9956704070277013, 0.9974035787097337, 0.9982668270848678, 0.9987167876217261, 0.9990834198916844, 0.999223405526518, 0.9994333862616385, 0.9993900570945596];
ml_1m_ub_lsh1_hash_functions_prediction_coverage =[1.0, 0.9999566708995804, 0.9998933433657071, 0.9997166928642028, 0.9993733918611046, 0.9983401550852644, 0.9965569916354378, 0.9913908046567862, 0.9792085912851601, 0.953237638297206];
ml_1m_ub_lsh2_hash_tables_prediction_coverage  = [0.9290165920434293, 0.9814184132994829, 0.9912308068909756, 0.9949104759214126, 0.996606987902403, 0.9973202551086051, 0.9983934827858599, 0.9985234725199866, 0.998623461354554, 0.9988401113224638];
ml_1m_ub_lsh2_hash_functions_prediction_coverage =[0.999980001999798, 0.9999033426324225, 0.9997733546646241, 0.9994967136288754, 0.9988001140223327, 0.9967969689376326, 0.9915141168931441, 0.9830882623467954, 0.9611402990541108, 0.9144012227264388];

ymusic_ub_lsh_hash_tables_prediction_coverage  = [0.9545437972837482, 0.9952055418831464, 0.9991158508795918, 0.9997812414547443, 0.9999635402424575, 0.9999908850606144, 1.0, 1.0, 1.0, 1.0];
ymusic_ub_lsh_hash_functions_prediction_coverage =[1.0, 1.0, 1.0, 1.0, 1.0, 0.9999726551818431, 0.9990247014857351, 0.9914228420381005, 0.9547169811320755, 0.8917145200984414];
ymusic_ib_lsh_hash_tables_prediction_coverage  = [0.4092243186582809, 0.5980767477896273, 0.7407802388114119, 0.8198341081031811, 0.8693282289672773, 0.9021602406343998, 0.9225412451007201, 0.9490930635311275, 0.9592471060067451, 0.968890711876766];
ymusic_ib_lsh_hash_functions_prediction_coverage =[1.0, 1.0, 0.9997174368790448, 0.9940479445811685, 0.960823990520463, 0.8760277094157324, 0.714738856986601, 0.5072646066903655, 0.3510801203171999, 0.21014492753623185];
ymusic_ib_lsh1_hash_tables_prediction_coverage  = [0.41123872026251024, 0.6222769118585362, 0.7426214565673138, 0.8138091331692644, 0.8741591468416735, 0.9021875854525567, 0.9273357032175736, 0.9428766748701122, 0.9573420836751435, 0.9697292863002461];
ymusic_ib_lsh1_hash_functions_prediction_coverage =[1.0, 1.0, 0.9997538966365873, 0.993537507975572, 0.9566675781606052, 0.8639595296691276, 0.6999817701212288, 0.502388114119041, 0.33122778233524747, 0.24401604229331875];
ymusic_ib_lsh2_hash_tables_prediction_coverage  = [0.2954334153677878, 0.5066539057515268, 0.6020599763011576, 0.6899462218576247, 0.7634126333059886, 0.814556558198888, 0.8480539604411631, 0.8793273174733388, 0.8987968280010938, 0.9129249840488561];
ymusic_ib_lsh2_hash_functions_prediction_coverage =[1.0, 0.9999270804849147, 0.9975389663658737, 0.9745055145383285, 0.9033178379363777, 0.750788442256859, 0.5627654726096071, 0.3964998632759092, 0.254361498496035, 0.1466229149576155];
ymusic_ub_lsh1_hash_tables_prediction_coverage  = [0.9554461762829277, 0.9947862546714065, 0.9991796554552912, 0.9998997356667578, 0.9999453103636862, 1.0, 0.9999817701212287, 1.0, 1.0, 1.0];
ymusic_ub_lsh1_hash_functions_prediction_coverage =[1.0, 1.0, 1.0, 1.0, 1.0, 0.9999817701212287, 0.9990429313645065, 0.9910673594020599, 0.9605414273995079, 0.8908577157961899];
ymusic_ub_lsh2_hash_tables_prediction_coverage  = [0.9159146841673502, 0.9844316835293045, 0.9961079208823261, 0.9986874487284659, 0.9995989426670313, 0.9998632759092153, 0.9999635402424575, 0.9999908850606144, 0.9999908850606144, 1.0];
ymusic_ub_lsh2_hash_functions_prediction_coverage =[1.0, 1.0, 1.0, 1.0, 1.0, 0.9996809771215022, 0.9952055418831464, 0.9730835839941664, 0.9150487649257132, 0.8202260504967641];

#Use K = 6, L = 5


# Draw Hash Functions - UB-LSH-KNN
f= figure();
x = 1:10;

y1 = ml_1m_ub_lsh_hash_functions_prediction_coverage;
y2 = amazon_ub_lsh_hash_functions_prediction_coverage;
y3 = ymusic_ub_lsh_hash_functions_prediction_coverage;

plot (x, y1,'-dk', x, y2,'-*k',x, y3,'-+k');
h = legend('ML-1M', 'Amazon Movies', 'Yahoo Music!', 'location', 'southwest');
set (h, 'fontunits', "points");
set (h, 'fontsize', 8);
xlabel("K");
ylabel('Coverage');
xlim([1, 10])
ylim([0 1])
write(f, 'ub-lsh-hash-functions-prediction-coverage');

# Draw Hash Tables - UB-LSH-KNN
f= figure();
x = 1:10;

y1 = ml_1m_ub_lsh_hash_tables_prediction_coverage;
y2 = amazon_ub_lsh_hash_tables_prediction_coverage;
y3 = ymusic_ub_lsh_hash_tables_prediction_coverage;

plot (x, y1,'-dk', x, y2,'-*k',x, y3,'-+k');
h = legend('ML-1M', 'Amazon Movies', 'Yahoo Music!', 'location', 'southeast');
set (h, 'fontunits', "points");
set (h, 'fontsize', 8);
xlabel("L");
ylabel('Coverage');
xlim([1, 10])
ylim([0 1])
write(f, 'ub-lsh-hash-tables-prediction-coverage');


# Draw Hash Functions - IB-LSH-KNN
f= figure();
x = 1:10;

y1 = ml_1m_ib_lsh_hash_functions_prediction_coverage;
y2 = amazon_ib_lsh_hash_functions_prediction_coverage;
y3 = ymusic_ib_lsh_hash_functions_prediction_coverage;

plot (x, y1,'-dk', x, y2,'-*k',x, y3,'-+k');
h = legend('ML-1M', 'Amazon Movies', 'Yahoo Music!', 'location', 'southwest');
set (h, 'fontunits', "points");
set (h, 'fontsize', 8);
xlabel("K");
ylabel('Coverage');
xlim([1, 10])
ylim([0 1])
write(f, 'ib-lsh-hash-functions-prediction-coverage');


# Draw Hash Tables - IB-LSH-KNN
f= figure();
x = 1:10;
y1 = ml_1m_ib_lsh_hash_tables_prediction_coverage;
y2 = amazon_ib_lsh_hash_tables_prediction_coverage;
y3 = ymusic_ib_lsh_hash_tables_prediction_coverage;

plot (x, y1,'-dk', x, y2,'-*k',x, y3,'-+k');
h = legend('ML-1M', 'Amazon Movies', 'Yahoo Music!', 'location', 'southeast');
set (h, 'fontunits', "points");
set (h, 'fontsize', 8);
xlabel("L");
ylabel('Coverage');
xlim([1, 10])
ylim([0 1])
write(f, 'ib-lsh-hash-tables-prediction-coverage');


###################################
# Draw Hash Functions - UB-LSH1
###################################
f= figure();
x = 1:10;

y1 = ml_1m_ub_lsh1_hash_functions_prediction_coverage;
y2 = amazon_ub_lsh1_hash_functions_prediction_coverage;
y3 = ymusic_ub_lsh1_hash_functions_prediction_coverage;

plot (x, y1,'-dk', x, y2,'-*k',x, y3,'-+k');
h = legend('ML-1M', 'Amazon Movies', 'Yahoo Music!', 'location', 'southwest');
set (h, 'fontunits', "points");
set (h, 'fontsize', 8);
xlabel("K");
ylabel('Coverage');
xlim([1, 10])
ylim([0 1])
write(f, 'ub-lsh1-hash-functions-prediction-coverage');

# Draw Hash Tables - UB-LSH1
f= figure();
x = 1:10;

y1 = ml_1m_ub_lsh1_hash_tables_prediction_coverage;
y2 = amazon_ub_lsh1_hash_tables_prediction_coverage;
y3 = ymusic_ub_lsh1_hash_tables_prediction_coverage;

plot (x, y1,'-dk', x, y2,'-*k',x, y3,'-+k');
h = legend('ML-1M', 'Amazon Movies', 'Yahoo Music!', 'location', 'southeast');
set (h, 'fontunits', "points");
set (h, 'fontsize', 8);
xlabel("L");
ylabel('Coverage');
xlim([1, 10])
ylim([0 1])
write(f, 'ub-lsh1-hash-tables-prediction-coverage');


# Draw Hash Functions - IB-LSH1
f= figure();
x = 1:10;

y1 = ml_1m_ib_lsh1_hash_functions_prediction_coverage;
y2 = amazon_ib_lsh1_hash_functions_prediction_coverage;
y3 = ymusic_ib_lsh1_hash_functions_prediction_coverage;

plot (x, y1,'-dk', x, y2,'-*k',x, y3,'-+k');
h = legend('ML-1M', 'Amazon Movies', 'Yahoo Music!', 'location', 'southwest');
set (h, 'fontunits', "points");
set (h, 'fontsize', 8);
xlabel("K");
ylabel('Coverage');
xlim([1, 10])
ylim([0 1])
write(f, 'ib-lsh1-hash-functions-prediction-coverage');


# Draw Hash Tables - IB-LSH1
f= figure();
x = 1:10;
y1 = ml_1m_ib_lsh1_hash_tables_prediction_coverage;
y2 = amazon_ib_lsh1_hash_tables_prediction_coverage;
y3 = ymusic_ib_lsh1_hash_tables_prediction_coverage;

plot (x, y1,'-dk', x, y2,'-*k',x, y3,'-+k');
h = legend('ML-1M', 'Amazon Movies', 'Yahoo Music!', 'location', 'southeast');
set (h, 'fontunits', "points");
set (h, 'fontsize', 8);
xlabel("L");
ylabel('Coverage');
xlim([1, 10])
ylim([0 1])
write(f, 'ib-lsh1-hash-tables-prediction-coverage');



###################################
# Draw Hash Functions - UB-LSH2
###################################
f= figure();
x = 1:10;

y1 = ml_1m_ub_lsh2_hash_functions_prediction_coverage;
y2 = amazon_ub_lsh2_hash_functions_prediction_coverage;
y3 = ymusic_ub_lsh2_hash_functions_prediction_coverage;

plot (x, y1,'-dk', x, y2,'-*k',x, y3,'-+k');
h = legend('ML-1M', 'Amazon Movies', 'Yahoo Music!', 'location', 'southwest');
set (h, 'fontunits', "points");
set (h, 'fontsize', 8);
xlabel("K");
ylabel('Coverage');
xlim([1, 10])
ylim([0 1])
write(f, 'ub-lsh2-hash-functions-prediction-coverage');

# Draw Hash Tables - UB-LSH2
f= figure();
x = 1:10;

y1 = ml_1m_ub_lsh2_hash_tables_prediction_coverage;
y2 = amazon_ub_lsh2_hash_tables_prediction_coverage;
y3 = ymusic_ub_lsh2_hash_tables_prediction_coverage;

plot (x, y1,'-dk', x, y2,'-*k',x, y3,'-+k');
h = legend('ML-1M', 'Amazon Movies', 'Yahoo Music!', 'location', 'southeast');
set (h, 'fontunits', "points");
set (h, 'fontsize', 8);
xlabel("L");
ylabel('Coverage');
xlim([1, 10])
ylim([0 1])
write(f, 'ub-lsh2-hash-tables-prediction-coverage');


# Draw Hash Functions - IB-LSH2
f= figure();
x = 1:10;

y1 = ml_1m_ib_lsh2_hash_functions_prediction_coverage;
y2 = amazon_ib_lsh2_hash_functions_prediction_coverage;
y3 = ymusic_ib_lsh2_hash_functions_prediction_coverage;

plot (x, y1,'-dk', x, y2,'-*k',x, y3,'-+k');
h = legend('ML-1M', 'Amazon Movies', 'Yahoo Music!', 'location', 'southwest');
set (h, 'fontunits', "points");
set (h, 'fontsize', 8);
xlabel("K");
ylabel('Coverage');
xlim([1, 10])
ylim([0 1])
write(f, 'ib-lsh2-hash-functions-prediction-coverage');


# Draw Hash Tables - IB-LSH2
f= figure();
x = 1:10;
y1 = ml_1m_ib_lsh2_hash_tables_prediction_coverage;
y2 = amazon_ib_lsh2_hash_tables_prediction_coverage;
y3 = ymusic_ib_lsh2_hash_tables_prediction_coverage;

plot (x, y1,'-dk', x, y2,'-*k',x, y3,'-+k');
h = legend('ML-1M', 'Amazon Movies', 'Yahoo Music!', 'location', 'southeast');
set (h, 'fontunits', "points");
set (h, 'fontsize', 8);
xlabel("L");
ylabel('Coverage');
xlim([1, 10])
ylim([0 1])
write(f, 'ib-lsh2-hash-tables-prediction-coverage');
